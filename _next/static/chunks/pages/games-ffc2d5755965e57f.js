(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{388:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(7876),s=r(1411),l=r(596),n=r(3995),c=r(4107);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920;if(!e||"string"!=typeof e||""===e.trim())return e||"";let r=e.startsWith("//")?"https:"+e:e;if(r.includes("images.igdb.com/igdb/image/upload/"))return r.replace("/t_thumb/","/t_cover_big/");try{let e=new URL(r);return e.searchParams.set("width",String(t)),e.searchParams.set("quality","90"),e.searchParams.set("dpr","2"),e.toString()}catch(a){let e=r.includes("?")?"&":"?";return"".concat(r).concat(e,"width=").concat(t,"&quality=90&dpr=2")}}var i=r(4232);let u=()=>{let[e,t]=(0,i.useState)(!1),r=()=>t(!1),[u,d]=(0,i.useState)([]),[m,h]=(0,i.useState)([]),[g,p]=(0,i.useState)([]),[v,f]=(0,i.useState)(null);return(0,i.useEffect)(()=>{try{let e=(0,c.Rq)();p(e)}catch(e){console.error("Error loading game statuses:",e)}},[]),(0,i.useEffect)(()=>{let e=!1;return(async()=>{try{let t=await fetch("https://api.zehai.dk/games/top-rated",{cache:"no-store",mode:"cors",credentials:"omit"});if(!t.ok)throw Error("API responded ".concat(t.status));let r=await t.json(),a=r;if(!Array.isArray(a)){let e="object"==typeof r&&null!==r?r:null;a=Array.isArray(null==e?void 0:e.games)?e.games:[]}let s=a.map((e,t)=>{var r,a,s,l,n;let c,i="/gamepictures/placeholder.png";if("string"==typeof e.cover?c=e.cover:e.cover&&"object"==typeof e.cover&&"url"in e.cover&&(c=e.cover.url),c&&""!==c.trim()){let e=o(c);e&&""!==e.trim()&&(i=e)}return{id:null!=(r=e.id)?r:t+1,rank:t+1,title:null!=(a=e.name)?a:"Untitled",producer:"",hours:Math.round(null!=(s=e.rating)?s:0),image:i,rating:Number(null!=(n=null!=(l=e.weightedRating)?l:e.rating)?n:0),console:"",year:"",genre:"",company:"",credits:"",hundredPercent:"",dlc:""}});e||(d(s),h(s),f(null))}catch(t){if(!e)try{let e=await fetch("/backupList.json",{cache:"no-store"});if(!e.ok)throw Error("Backup responded ".concat(e.status));let t=await e.json(),r=(Array.isArray(t)?t:Array.isArray(null==t?void 0:t.games)?t.games:[]).map((e,t)=>{var r,a,s,l,n;let c,i="/gamepictures/placeholder.png";if("string"==typeof e.cover?c=e.cover:e.cover&&"object"==typeof e.cover&&"url"in e.cover&&(c=e.cover.url),c&&""!==c.trim()){let e=o(c);e&&""!==e.trim()&&(i=e)}return{id:null!=(r=e.id)?r:t+1,rank:t+1,title:null!=(a=e.name)?a:"Untitled",producer:"",hours:Math.round(null!=(s=e.rating)?s:0),image:i,rating:Number(null!=(n=null!=(l=e.weightedRating)?l:e.rating)?n:0),console:"",year:"",genre:"",company:"",credits:"",hundredPercent:"",dlc:""}});d(r),h(r),f(null)}catch(e){f(t instanceof Error?t.message:String(t)),d([]),h([])}}})(),()=>{e=!0}},[]),(0,a.jsxs)(n.A,{nav:e,openNav:()=>t(!0),closeNav:r,scrollToSection:()=>r(),children:[v&&(0,a.jsx)("div",{className:"w-[90%] max-w-[112rem] mx-auto mb-6",role:"alert",children:(0,a.jsxs)("div",{className:"p-4 rounded border-2 border-theme-secondary bg-theme-darker",children:[(0,a.jsx)("p",{className:"text-theme-secondary font-bold mb-2",children:"Failed to load games"}),(0,a.jsx)("p",{className:"text-theme-text text-sm break-words mb-4",children:v}),(0,a.jsx)("p",{className:"text-theme-text text-xs opacity-70",children:"(Static build fetch failed)"})]})}),!v&&u.length>0&&(0,a.jsx)(s.A,{games:u,onFilterChange:e=>{h(e)},gameStatuses:g}),!v&&(0,a.jsx)(l.A,{games:m,gameStatuses:g,onStatusUpdate:()=>{try{let e=(0,c.Rq)();p(e)}catch(e){console.error("Error refreshing game statuses:",e)}},valueLabel:"/ 100",showStatusButton:!0,disableLink:!0})]})}},1572:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/games",function(){return r(388)}])},5582:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(1269),s=r(7876);let l=(0,a.A)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},7366:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(1269),s=r(7876);let l=(0,a.A)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},8231:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(1269),s=r(7876);let l=(0,a.A)((0,s.jsx)("path",{d:"m21.58 16.09-1.09-7.66C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.2 17.63 3.39 19 4.94 19c.68 0 1.32-.27 1.8-.75L9 16h6l2.25 2.25c.48.48 1.13.75 1.8.75 1.56 0 2.75-1.37 2.53-2.91M11 11H9v2H8v-2H6v-1h2V8h1v2h2zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"SportsEsports")}},e=>{var t=t=>e(e.s=t);e.O(0,[79,269,230,196,636,593,792],()=>t(1572)),_N_E=e.O()}]);