(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{2988:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(7876),c=s(4232);class r{async getAccessToken(){if(this.accessToken&&Date.now()<this.tokenExpiry)return this.accessToken;try{console.log("Getting access token directly from Twitch...");let e=await fetch("https://id.twitch.tv/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials"})});if(!e.ok)throw Error("Twitch API error: ".concat(e.status," - ").concat(e.statusText));let t=await e.json();return this.accessToken=t.access_token,this.tokenExpiry=Date.now()+1e3*t.expires_in-6e4,console.log("Successfully got access token"),this.accessToken}catch(e){throw console.error("Error getting access token:",e),Error("Failed to authenticate. This might be due to CORS restrictions or missing credentials.")}}async searchGames(e){try{let t=await this.getAccessToken();console.log('Searching for games: "'.concat(e,'"')),console.log("Using token: ".concat(t.substring(0,10),"...")),console.log("Client ID: ".concat(this.clientId));let s=await fetch("https://cors-anywhere.herokuapp.com/https://api.igdb.com/v4/games",{method:"POST",headers:{Accept:"application/json","Client-ID":this.clientId,Authorization:"Bearer ".concat(t),"Content-Type":"text/plain","X-Requested-With":"XMLHttpRequest"},body:'search "'.concat(e,'"; fields name,summary,rating,first_release_date,genres.name,platforms.name,cover.url,involved_companies.company.name; limit 10;')});if(!s.ok)throw Error("IGDB API error: ".concat(s.status));let n=await s.json();return console.log("Found ".concat(n.length," games")),n}catch(e){throw console.error("Error searching games:",e),e}}async getGameById(e){throw Error("Get game not implemented yet")}constructor(){this.accessToken=null,this.tokenExpiry=0,this.clientId="s1zmgdsvd1uvy0dbpyrvwm8qui1lgw",this.clientSecret="7fi4oo437jcuty78vab8b00cb0oa75",this.clientId&&this.clientSecret||console.error("Missing TWITCH credentials in environment variables")}}let a=new r,i=()=>{let[e,t]=(0,c.useState)("Ready to test"),[s,r]=(0,c.useState)(!1),[i,o]=(0,c.useState)(null),l=async()=>{r(!0),o(null),t("Testing authentication...");try{let e=await a.searchGames("zelda");t("✅ Authentication successful!"),console.log("Test result:",e)}catch(e){o(e instanceof Error?e.message:"Unknown error"),t("❌ Authentication failed")}finally{r(!1)}};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"IGDB API Test"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Status:"}),(0,n.jsx)("p",{className:"text-sm",children:e})]}),i&&(0,n.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2 text-red-800",children:"Error:"}),(0,n.jsx)("p",{className:"text-sm text-red-600",children:i})]}),(0,n.jsx)("button",{onClick:l,disabled:s,className:"w-full py-2 px-4 rounded font-semibold ".concat(s?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:s?"Testing...":"Test Authentication"}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 mt-4",children:[(0,n.jsx)("p",{children:"This will test:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,n.jsx)("li",{children:"Getting access token from Twitch"}),(0,n.jsx)("li",{children:"Making a request to IGDB API"}),(0,n.jsx)("li",{children:'Searching for "zelda" games'})]})]})]})]})})}},8192:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/igdb-test",function(){return s(2988)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8192)),_N_E=e.O()}]);